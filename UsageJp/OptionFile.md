# オプションファイルについて

## 実行のための準備・条件

- 実行には，言語対応のコメントファイルと予約語ファイルが必要です．
  - コメントファイル
    - **最低限の記述が必要です．**
  - 予約語ファイル
    - 必須ではありませんが，置くことを推奨します．
    - ファイルが存在するとタイプ 2 までのコードクローンを検出し，そうでなければタイプ 1 のコードクローンを検出します．
- ファイルの置き場所
  - コメントファイルと予約語ファイルは`src/main/dist/comment` ディレクトリ，`src/main/dist/reserved` ディレクトリにそれぞれ置いてください．

## コメントファイルについて

- ファイル名について
  - 引数の language の入力と同じファイル名にする必要があります．
  - "c"を引数の language で入力するなら c_comment.txt という名前のファイルが必要です．
- 拡張子設定
  - 検出対象ファイルの拡張子を設定することができます．設定は必須です．
  - 実行時のコンソールの出力に「LOC = 0」がある場合，この拡張子の設定ミスであることが多いです．
- コメントルール
  - 対象言語で採用されているコメントルールを入力することで，コメントを無視したコードクローン検出が実行可能です．
  - 書き方の詳細は，後述されます．

## 予約語ファイルについて

- 予約語は変数名に使用出来ないキーワードです．
- 引数の language の入力に対応したファイル名にする必要があります．
- "c"を引数の language で入力するなら，c_reserved.txt という名前のファイルが必要です．
- このファイルが存在しなければタイプ 1 のコードクローンを検出します．
- ファイルの中に，予約語を 1 つ 1 つ改行を挟んで記述することで，リストアップは完了します．例：

```
if
while
class
...
```

- ファイルが存在しても何も書いてないとき，タイプ 2 のコードクローンを予約語なしで検出することになります．

## コメントファイルの記法

コメントファイルの記法の具体例を説明します．

### 拡張子について

- 検出対象ファイルの拡張子を設定することができます．
- **このオプションのみ必須**です．
- C 言語の場合，ファイル内に以下のように記述することで、拡張子が c と h のファイルを検出対象とみなします．

```
#extension
c
#extension
h
```

### コメントルール

対象言語で採用されているコメントルールを入力することで，コメントを無視したコードクローン検出が実行可能です．

#### 行コメント

- 任意の記号`A`以降をコメントとするルールです．
- 記法: _#start + 改行 + 開始記号_

```
#start
//
```

#### 複数行コメント

- 記号 A から記号 B までをコメントとするルールです．
- 記法：_#startend + 改行 + 開始記号 + 改行 + 終了記号_
- 記法(ネストあり)：_#startendnest + 改行 + 開始記号 + 改行 + 終了記号_

```
#startend
/*
*/
```

#### 行全体コメント

- 行の先頭に，記号 A があればその行全体をコメントとするルールです．
- 記法：_#linestart + 改行 + 開始記号_

```
#linestart
*
```

#### 複数行全体コメント

- 行の先頭に記号 A がある行から，行先頭に記号 B がある行までをコメントとするルールです．
- 記法：_#linestartend + 改行 + 開始記号 + 改行 + 終了記号_

```
#linestartend
=begin
=end
```

#### 文字列リテラル

```
#prior
"
"
```

または

```
#literal
"
"
```

#### 逐語的文字列リテラル

- C#などで使用される逐語的文字列リテラルと同様のルールです．
- 改行やエスケープシーケンスのルールが違っています．

```
#literalverbatim
@"
"
```

#### 行継続文字

- C 言語の行継続文字「\」に同等の機能を他の文字で代用する場合に使用します．設定できるのは一種類のみです。

```
#linecontinue
\
```

#### 変数名に使える文字の設定

- 変数名に使える文字の設定を行えます．変数名に対応する正規表現を入力します．
- デフォルトは「英数字列＋全角文字＋アンダースコア」となっています。  
  例：  
  英数字列のみ……[0-9a-zA-Z]+  
  英数字列全角……[0-9a-zA-Z\u3040-\u30FF 一-龠]+  
  英数字列全角アンダースコア(デフォルト)……[0-9a-zA-Z\u3040-\u30FF 一-龠_]+

```
#variableregex
[0-9a-zA-Z]+
```
